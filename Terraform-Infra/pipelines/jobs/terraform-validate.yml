- job: terraform-validate
  displayName: "âœ… Terraform Validate"
  pool:
    vmImage: 'ubuntu-latest'

  steps:
    # ---------------------------
    # âœ… Checkout code
    # ---------------------------
    - checkout: self
      displayName: "Checkout Repository"

    # ---------------------------
    # âœ… Install pinned Terraform version
    # ---------------------------
    - task: TerraformInstaller@1
      displayName: "Install Terraform"
      inputs:
        terraformVersion: '1.5.0'

    # ---------------------------
    # âœ… Validate Terraform configs
    # ---------------------------
    - script: |
        echo "ðŸ“‚ Switching to working directory: $(workingDirectory)"
        cd $(workingDirectory)

        echo "ðŸ§ª Running terraform validate..."
        terraform validate
      displayName: "Validate Terraform Configuration"
      env:
        environment: $(environment)
      workingDirectory: $(workingDirectory)
