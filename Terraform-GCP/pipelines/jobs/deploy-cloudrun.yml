name: "Deploy to Cloud Run"
runs-on: ubuntu-latest

steps:
  - name: "Authenticate with Google Cloud"
    uses: google-github-actions/auth@v1
    with:
      credentials_json: ${{ secrets.GCP_CREDENTIALS }}

  - name: "Deploy to Cloud Run"
    run: |
      gcloud run deploy ${{ env.SERVICE_NAME }} \
        --image=gcr.io/${{ env.GCP_PROJECT_ID }}/${{ env.SERVICE_NAME }}:latest \
        --region=${{ env.GCP_REGION }} \
        --platform=managed \
        --allow-unauthenticated
